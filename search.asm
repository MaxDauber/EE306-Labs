;Programming Lab 2
;Max Dauber mjd3375
;11/5/17
;Patt EE306
	.ORIG	x3000
	AND R0, R0 #0
	AND R1, R1 #0
	AND R2, R2 #0
	AND R3, R3 #0
	AND R4, R4 #0
	AND R5, R5 #0
	AND R6, R6 #0
	LDI R1, L1
	LDI R2, H1
	ST R1, X_LOW
	ST R2, X_HIGH
BIG_L	JSR DIV_2 ;
	AND R0, R0 #0
	ADD R0, R0, R3
	AND R7, R7, #0
	LD R7, FUNC
	JSRR R7
	ADD R6, R6, R4
	BRZ B_END
	ADD R6, R6 #-1
	BRp POS
	ADD R0, R0, R1;CALC F(XLOW)
	AND R7, R7, #0
	LD R7, FUNC
	JSRR R7
	ADD R5, R5, R4
	BRn H_M
	BR L_M
POS	ADD R0, R0, R1;CALC F(XLOW)
	AND R7, R7, #0
	LD R7, FUNC
	JSRR R7
	ADD R5, R5, R4
	BRn L_M
H_M	AND R2, R2 #0
	ADD R2, R2, R3
	BR BIG_L
L_M	AND R1, R1 #0
	ADD R1, R1, R3
	BR BIG_L
B_END	ST R3, DONE
	HALT
DIV_2	ADD R3, R2, R1
	BRn N_LOOP
	BRz EXIT
P_LOOP	ADD R0, R0 #1
	ADD R3, R3 #-2
	BRn NEG
	BRz ZERO
	BR P_LOOP
ZERO	ADD R0, R0 #1
NEG	AND R3, R3 #0
	ADD R3, R3, R0
	BR EXIT
N_LOOP	NOT R3, R3
	ADD R3, R3, #1
I_LOOP	ADD R0, R0 #1
	ADD R3, R3 #-2
	BRn NEG1
	BRz ZERO1
	BR I_LOOP
ZERO1	ADD R0, R0 #1
NEG1	AND R3, R3 #0
	ADD R3, R3, R0
	NOT R3, R3
	ADD R3, R3, #1
EXIT	RET
X_LOW	.BLKW 1
X_HIGH	.BLKW 1
X_MID	.BLKW 1
FUNC	.FILL x5000
DONE	.FILL x4000
L1	.FILL x4001
H1	.FILL x4002
	.END